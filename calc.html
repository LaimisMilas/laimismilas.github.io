<!DOCTYPE html>
<html>
<head>	
<link rel="stylesheet" type="text/css" href="https://laimismilas.github.io/style.css" />
<script type="text/javascript" src="https://laimismilas.github.io/utils.js"></script>

<script src="./myscripts.js"></script>
<script>

var sTimeStart = "00:00";
var sTimeEnd = "00:00";

var meterStart = 0;
var meterEnd = 0;

var kwhDiff = 0;
var minDiff = 0;

function convertKwh(){

	var kwh = getValue("kwatt_1");
	var minutes = getValue("minutes_2");
	var result = kwhToWatts(kwh, minutes);
	result = result + " watts";

	printToElement("result_23", result);
}

function convertWattsToKwh(){

	var watts = getValue("watt_3");
	var secunds = getValue("minutes_1");
	var result = wattsToKwh(watts, secunds);

	printToElement("result_22", result);
}
	
function convertWattHoursToCallorys(){
	var watts = getValue("watt_hours");
	var result = wattHourToCallory(watts);
	
	printToElement("result_26", result + "cal.");
}	

// Kokiu galingumu buvo sildoma?
function usedPower(){

	init();

	var result = kwhToWatts(kwhDiff, minDiff);

	result = "Used power: " + toNumber(result, 2) + " watts";

	printToElement("used_power", result); 

}

// Kiek laipsniu buvo pakelta temperatura?
// Kiek litru vandens buvo pasildyta?

function convertKwhToJoul(){

	var kwh = getValue("kwatt_2");

	var result = kwhToJoul(kwh);

	result = result + " J";

	printToElement("result_25", result);
}

function convertJoulToCal(){

	var jouls = getValue("joul_1");

	var result = joulsToCol(jouls);

	result = result + " cal";

	printToElement("result_24", result);
}
	
function convertJoulToKwh(){

	var jouls = getValue("joul_1");

	var result = (jouls / 3600) / 1000;

	result = result + " kwh";

	printToElement("result_24", result);
}	

function calc(){
	
	init();

	var result = kwhDiff + "kwh, " + minDiff + "min. ";

	printToElement("result", result);
 	
	var a = kwhToWatts(kwhDiff, minDiff);

	a = wattsToKw(a);

	var b = minutesToTime(minDiff);

	result = a + "kw, " + b;
	
	printToElement("result_1", result);

}

function init(){

	sTimeStart = getValue("time_1");
	sTimeEnd = getValue("time_2");
   
	meterStart = getValue("watt_1");
	meterEnd = getValue("watt_2");

	kwhDiff = meterDiff(meterStart, meterEnd);
    
	minDiff = timeDiff(sTimeStart,sTimeEnd);

}
	
function wattsToJoul(watts, sec){
	return watts * sec;
}	

function kwhToJoul(kwh){

	var constKwh = 3600000;

	var result = kwh  * constKwh;

	return toNumber(result, 2);
}

function joulsToCol(jouls){
	//4.184J - 1 calorija
	var j = 4.184; 
	
	var result = jouls/j;

	return toNumber(result, 2);
}


function toNumber(value, prec){

	var result = value.toPrecision(prec);

	result = Number(result);
	
	return result;
}

function meterDiff(start, end){

	var result = end - start;

	return toNumber(result, 2);

}

function minutesToTime(minDiff){

	var hh = Math.trunc(minDiff/60);
	
	var mm = minDiff % 60;

	var result = hh + "val. "+ mm + "min. "; 

	return result;

}

function wattsToKw(watts){

	var result = watts / 1000;
	
	return toNumber(result, 2);

}

function wattsToKwh(watts, secunds){

	var result = watts / 1000;

	result = result * (secunds / 3600);

	result = toNumber(result, 2);
	
	return result + " kwh";

}

function kwhToWatts(kwh, minutes){

	var result = kwh * 1000;

	result = result / minutes;

	result = result * 60;

	return toNumber(result, 2);

}
	
function wattHourToKwH(wattHour){
	return 	wattHour / 1000;
}
	
function wattHourToCallory(wattHours){
	return wattHours * 860.42065;
}	

function timeDiff(start,end){

	var minIn24h = 1440;	
	var hStart = get(start, 0);
	var hEnd = get(end, 0);

	var result = 0;	

	if(hStart <= hEnd){

		result = usedMin(end) - usedMin(start)

	}else if(hStart > hEnd){

		result = (minIn24h - usedMin(start))	+ usedMin(end); 		

	}

	return result;
}

function usedMin(text){
 	  
	var hh = get(text,0);
	var mm = get(text,1);

	var minutes = (60 * hh) + mm;

	return minutes;
}

function get(text, index){

	var result = text.split(':');

	result = Number(result[index]); 
	
	return result;
}
	// 1g - 1c - 1J
	// 1 cal = 0.001162 Wh
	// 44,000 cal = 51.137778 Wh
function calcUserCalorys(){
	var a = getValue("mass_g");
	var b = getValue("cells_c");
	var calorrys = (a * b);
	//4.184J - 1 calorija
	var jConst = 4.184; 
	var jouls = calorrys/jConst;
	var kwh = calorrys / 3600000;
	kwh = kwh + " kwh";

	printToElement("result_24", result);
	printToElement("result_35", toNumber(calorrys, 2) + "cal., Jouls: " + toNumber(jouls, 2) + "J., Kwh: " + kwh);
}
	
  function secToHours(sec) {
	 var sec = sec.toString().replace(/[^\d\.eE-]/g,'');
	 if (sec/3600 != 0) {
	    sec = sec/3600;
	 }
	 return sec;
   }
   function hoursToSec(sec) {
	 var sec = sec.toString().replace(/[^\d\.eE-]/g,'');
	 if (sec*3600 != 0) {
	    sec = sec*3600;
	 }
	 return sec; 
   }

</script>
</head>
<body>
		<div id="header">
			<div id="menutabs"><div>
		</div>
		<div id="main">
			<div id="sidebar">
			</div>
			<div id="content">
				<div>
	Watt-hours:<input id="watt_hours" type="text" value="2000"/>
	<br/>
	<button onclick="convertWattHoursToCallorys()">convert calorrys</button>
	<p id="result_26"></p>
<div/>
<div>
	Kwh:<input id="kwatt_2" type="text" value="2000"/>
	<br/>
	<button onclick="convertKwhToJoul()">convert kwh to joul</button>
	<p id="result_25"></p>
<div/>
<div>
	Joul:<input id="joul_1" type="text" value="20000"/>
	<br/>
	<button onclick="convertJoulToCal()">convert joul to cal</button>
	<button onclick="convertJoulToKwh()">convert joul to kwh</button>
	<p id="result_24"></p>
<div/>
<div>
	Kwh:<input id="kwatt_1" type="text" value="2"/>
	Used minutes:<input id="minutes_2" type="text" value="120"/>
	<br/>
	<button onclick="convertKwh()">convertKwh</button>
	<p id="result_23"></p>
<div/>
<div>
	Power in watts:<input id="watt_3" type="text" value="2000"/>
	Used secunds:<input id="minutes_1" type="text" value="120"/>
	<br/>
	<button onclick="convertWattsToKwh()">convertWattsToKwh</button>
	<p id="result_22"></p>
<div/>
<div>
	Time From:<input id="time_1" type="text" value="22:30"/>
	To:<input id="time_2" type="text" value="23:30"/>
	<br/>
	Kwh From:<input id="watt_1" type="text" value="23.00"/>
	To:<input id="watt_2" type="text" value="25.00"/>
	<br/>
	<button onclick="calc()">calc</button>
	<p id="result"></p>
	<p id="result_1"></p>
	<button onclick="usedPower()">used power</button>
	<p id="used_power"></p>
<div/>
<p>
1 watt = 0.001 kilowatts arba 1kw = 1000 watt, <br/> 
1w x 1s = 1 ws = 1J, <br/> 
<a href="https://www.rapidtables.com/convert/electric/Watt_to_Joule.html" >Watt_to_Joule.html</a> <br/>
E(J) = 30W × 3s = 90J <br/>
1kWh = 1000W x 3600s = 3 600 000 Ws = 3 600 000 J, <br/>
4.184J - 1 calorija, 1g vandens pasildyti 1 laipsniu. <br/>
4.184W x 1s = 4.184J<br/>
watt-hours = calories × 0.001162<br/>
calories = watt-hours × 860.42065<br/>
1 cal = 0.001162 Wh<br/>
1 cal = 1.1622E-6 kWh<br/>
1 cal = 4.184 J<br/>
1 J = 2.7778E-7 kWh<br/>	
</p>
<div>
	<input id="mass_g" type="text" value="1000"/>(g)
	<input id="cells_c" type="text" value="20"/>(c)
	<br/>
	<button onclick="calcUserCalorys()">calcUserCalorys</button>
	<p id="result_35"></p>
<div/>	
<p>1 year = 31556952000 milisecundes</p>
<p>1 year = 31556952 secundes</p>	
<p>1 year = 525949 minutes</p>
<p>1 year = 8765 hours</p>
<p>1 year = 365 days</p>
<p>1 year = 52 weeks</p>
<p>
	<a href="http://www.kylesconverter.com/time/years">Kiti konverteriai</a>
	<a href="http://www.unitconversion.org/unit_converter/time-ex.html">Laiko konverteriai</a>
	<a href="https://www.inchcalculator.com/convert/calorie-to-watt-hour/">calorie-to-watt-hour</a>
</p>
</div>
</div>
<p>Click the button to evaluate/execute JavaScript code/expressions.</p>
<button onclick="executeScript()">Try it</button>
<textarea row=10 id="codeEval">
</textarea>
<p id="demo"></p>
<script>
	
function executeScript() {
  var codeToExecute = document.getElementById("codeEval").value;
  var res = eval(codeToExecute) + "<br>";
  document.getElementById("demo").innerHTML = res;
}
	
 Menu.tabs.forEach((item) => {
     let el = Menu.elTmp();
     el.href = item.href;
     el.text = item.text;
     document.getElementById("menutabs").appendChild(el);
 });

</script>
<div id="footer">
	<span>Author:</span><span>Laimonas Milasius 2019</span>
</div>
</body>
</html>

